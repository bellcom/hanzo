{% extends layout %}
{% block content %}

{% if page_type|default('page') != 'frontpage' %}
  <h2>{{ page.title }}</h2>
{% endif %}
  <article>
    {{ parse(page.content) }}
  </article>

{% endblock %}

{% block javascript %}
{% if page_type|default('page') == 'frontpage' %}
<script>
(function($, document) {
  if ($('html').hasClass('mobile') == false) {
    $('article a.button').data('text', i18n.t('Close'))
    $('article a.button').on('click', function(event) {
      event.preventDefault();
      var $a = $(this);
      var $article = $a.parent();
      var $main = $article.parent();
      var $div = $('div', $article).first();

      var current_label = $a.text();
      $a.text($a.data('text'));
      $a.data('text', current_label);

      if ($article.height() > 165) {
        var height = 165;
        var marginTop = 440;
        var maxWidth = 370;
      } else {
        var marginTop = 75;
        var maxWidth = $('#container').width() - ($('nav.main').width() + $('#teasers').width() + 100);
        if (maxWidth > 670) {
          maxWidth = 670;
        }

        $('html').append('<div class="xyz" style="position:absolute; top:-20000px; left: -20000px; width:'+maxWidth+'px;padding:15px">'+$article.html()+'</div>');
        var height = $('html div.xyz div').outerHeight(true);
        $('html div.xyz div').remove();
      }

      $main.animate({
        marginTop: marginTop,
        width: maxWidth,
        height: height,
      });
      $article.animate({
        height: height
      });
      $div.animate({
        height: height - 65
      });
    });
  }
})(jQuery, document);
</script>
{% endif %}
{% endblock %}
