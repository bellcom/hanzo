{% extends '::adminbase.html.twig' %}

{% block content %}

<nav class="sub">
  <ul>
    <li>
      <a href="{{ path('admin_products') }}" title="{{ 'admin.back.button'|trans({}, 'admin') }}">
        {{ 'admin.back.button'|trans({}, 'admin') }}
    </a>
  </li>
  </ul>
</nav>

{% if app.session.hasFlash('notice') %}
<div class="message notice">
  {{ app.session.flash('notice')|trans({}, 'admin') }}
</div>
{% endif %}

<h1>{{ 'admin.product.categories.header.text.%product-name%'|trans({'%product-name%' : current_product.sku}, 'admin') }}</h1>


<p>{{ 'admin.product.categories.description.text'|trans({}, 'admin') }}</p>

<select id="product-category-selector" name="product-category-selector">
  <option value="0">{{ 'admin.products.category.selector.description'|trans({}, 'admin') }}</option>
  {% for category in categories %}
  <option value="{{ category.id }}-{{ current_product.id }}">({{ category.context }}) | {{ category.title }}</option>
  {% endfor %}
</select>
<ul id="product-categories">
  {% if product_categories|length > 0 %}
    {% for product_category in product_categories %}
    <li>
      <span class="actions">
        <a href="{{ path('admin_product_cat_delete', {'category_id': product_category.id, 'product_id' : current_product.id}) }}" class="delete" title="{{ 'delete'|trans({}, 'admin') }}">
          {{ 'delete'|trans({}, 'admin') }}
        </a>
      </span>
      <span class="id">(#{{ product_category.id }})</span>
      <span class="id">({{ product_category.context }}) |</span>
      <span class="title">{{ product_category.title }}</span>
    </li>
    {% endfor %}
  {% endif %}
</ul>


{% if product_images|length > 0 %}

<h1>{{ 'admin.product.images.header.text.%product-name%'|trans({'%product-name%' : current_product.sku}, 'admin') }}</h1>


<p>{{ 'admin.product.images.description.text'|trans({}, 'admin') }}</p>

 <ul id="product-images-list">
  {% for product_image in product_images %} 
    
    <li id="item-{{ product_image.image_id }}">
      <div class="image">
        <span class="id">(#{{ product_image.image_id }})</span>
        {{ product_image_tag(product_image.image, '120x240', { 'alt' : '' }) }}
      </div>
      <div class="references">
        <select class="product-selector" name="product-selector">
          <option value="0">{{ 'admin.products.product.selector.description'|trans({}, 'admin') }}</option>
          {% for product in products %}
          <option value="{{ product_image.image_id }}-{{ product.id }}">{{ product.sku }}</option>
          {% endfor %}
        </select>
        <ul class="product-references">
          {% if product_image.product_ref_ids|length > 0 %}
            {% for product_ref in product_image.product_ref_ids %}
            <li>
              <span class="actions">
                <a href="{{ path('admin_product_ref_delete', {'image_id': product_image.image_id, 'product_id' : product_ref.id}) }}" class="delete" title="{{ 'delete'|trans({}, 'admin') }}">
                  {{ 'delete'|trans({}, 'admin') }}
                </a>
              </span>
              <span class="id">(#{{ product_ref.id }})</span>
              <span class="sku">{{ product_ref.sku }}</span>
            </li>
            {% endfor %}
          {% endif %}
        </ul>
      </div>
    </li>

  {% endfor %}
 </ul>

{% endif %}

{% endblock %}