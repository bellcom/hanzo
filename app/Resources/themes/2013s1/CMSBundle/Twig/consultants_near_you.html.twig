<div id="near-you-container" class="near-you-container grid_6 omega"></div>
<script type="text/javascript">
var near_you_params = {
    type : geo_zipcode_params.type || "{{ type }}",
    lat  : {{ lat }},
    lon  : {{ lon }},
    all  : {{ all|default('false') }}
};
</script>

<script type="text/html" id="consultantItem">
<? if (0 === data.length) { ?>
    <div class="grid_6 alpha omega row">{{ 'no.open_house.events.near.you'|trans({}, 'events') }}</div>
<?} ?>
<? for(i=0, l=data.length; i<l; i++) { ?>
    <? if ((i+1) %3 === 1) { ?>
        <div class="grid_6 alpha omega row">
    <? } ?>
        <div class="entry <?= (i%2 ? 'even' : 'odd') ?> grid_2 <? if ((i+1) %3 === 1) { ?>alpha<? } ?> <? if ((i+1) %3 === 0) { ?>omega<? } ?>">
            <div class="wrapper box">
                <div class="info">
                    <?= data[i].name ?><br>
                    <?= data[i].zip ?> <?= data[i].city ?><br>
                    {{ 'Phone'|trans }}: <?= data[i].phone ?><br>
                    {{ 'Email'|trans }}: <a href="mailto:<?= data[i].email ?>"><?= data[i].email ?></a><br>
                </div>
                <div class="note">
                    <? if (undefined !== data[i].events && data[i].events.length) { ?>
                        <?= data[i].avatar ?>
                        <strong>{{ 'open.house.label'|trans({}, 'events') }}</strong>
                        <? jQuery.each(data[i].events, function(i, event) { ?>
                            <? jQuery.each(event.dates, function(ii, date) { ?>
                                <div class="open-house-block">
                                    <?= date.date ?><br>
                                    <p>
                                        <?= event.address ?><br>
                                        <?= event.zip ?> <?= event.city ?><br>
                                    </p>
                                    <?= date.rsvp ?><br>
                                <? if (date.note) { ?>
                                    <p><em><?= date.note ?></em></p>
                                <? } ?>
                                </div>
                            <? }); ?>
                        <? }); ?>

                    <? } else { ?>
                        <?= data[i].info ?>
                    <? } ?>
                </div>
            </div>
        </div>
    <? if (((i+1) %3 === 0) || (i+1) === l) { ?>
        </div>
    <? } ?>
<? } ?>
</script>

