{% extends layout %}

{% block content %}

{% if store_mode == 'webshop' %}
    <header class="grid_8 alpha omega">
        <hgroup>
                {{ 'my.account.login.header'|trans({}, 'account')|raw }}
        </hgroup>
    </header>
{% else %}
    <h1>Login</h1>
{% endif %}

{% if error %}
    <div class="msg error">{{ error.message|trans({}, 'account') }}</div>
{% endif %}

{% if app.session.hasFlash('error') %}
<div class="msg error">
  {{ app.session.flash('error')|raw }}
</div>
{% endif %}

<div class="grid_5 alpha">
    {{ 'my.account.login.text'|trans({}, 'account')|raw }}
</div>

<div class="grid_3 omega">

{% if store_mode == 'webshop' %}
    <h2>{{ 'new.customer'|trans({}, 'account') }}</h2>
    {{ 'my.account.login.notice'|trans({}, 'account')|raw }}
    <a href="{{ url('_account_create') }}" class="button">{{ "create.account.link"|trans({}, 'account') }}</a>
{% endif %}

    <h2>{{ 'existing.customer'|trans({}, 'account') }}</h2>
    <form action="{{ path('login_check') }}" method="post">
        <label for="username">
            {{ 'email'|trans({}, 'account') }}:
            <input type="text" id="username" name="_username" value="{{ last_username }}">
        </label>

        <label for="password">
            {{ 'password'|trans({}, 'account') }}:
            <input type="password" id="password" name="_password">
        </label>

        <input type="hidden" name="_target_path" value="{{ url(target) }}">
        <input type="submit" name="login" value="{{ 'my.account.login'|trans({}, 'account') }}" class="button">
    </form>

    <h2>{{ 'password.forgotten'|trans({}, 'account') }}</h2>
    <p><a href="{{ url('_account_lost_password') }}">{{ 'retrive.password'|trans({}, 'account') }}</a></p>

</div>

{% endblock %}

{% block javascript %}
<script type="text/javascript">
(function($) {
  $('#username').focus();
})(jQuery);
</script>
{% endblock %}
