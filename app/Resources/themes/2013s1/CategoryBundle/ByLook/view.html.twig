{% extends layout %}

{% block content %}

<header class="grid_8 alpha omega">
    <hgroup>
        {{ ('headers.'~page_type)|trans({}, 'category')|raw }}
    </hgroup>
</header>

<div class="grid_8 alpha omega">
  <div class="grid_2 alpha sub-menu menu">
    {% render 'CMSBundle:Menu:menu' with {'type': 'cat', 'offset': cms_id } %}
  </div>
  <div class="product-list clearfix grid_6 omega">

    {% for product in products %}
      {% if loop.index % 3 == 1 %}
        <div class="grid_6 alpha omega row">
      {% endif %}
          <div class="look block block-num-{{ loop.index }} grid_2 {% if loop.index % 3 == 1 and loop.index is not divisibleby(3) %} alpha {% endif %}{% if loop.index is divisibleby(3) %} omega {% endif %}">
            <a href="{{ product.url }}" title="{{ "more.product.info"|trans() }}" style="height:410px;">
              {{ product_image_tag(product.image, '234x410', {
                'alt' : '',
              }) }}
              <div class="buy-set"></div>
            </a>
          </div>
      {% if loop.index is divisibleby(3) or loop.last %}
        </div>
      {% endif %}

    {% else %}

      <div class="out-of-stock">
        {{ 'all.products.out.of.stock'|trans }}
      </div>

    {% endfor %}
  </div>
  <div class="infinite-scroll-trigger grid_6 alpha omega"></div>
</div>

{% if paginate %}
  <div class="grid_8 row">
    <div class="grid_2 push_6">
      {% import "::macro.pager.html.twig" as p %}
      {{ p.pager(paginate, 'product-list') }}
    </div>
  </div>
{% endif %}

{#  yatzy js template used by the pager, do not delete ! #}

<script type="text/html" id="productItems">
  <? for(i=0, l=data.length; i<l; i++) {?>
    <? if((i+1)%3 === 1) {?>
      <div class="grid_6 alpha omega">
    <?}?>
    <div class="block block-num-<?=(i+1)?> grid_2 <? if((i+1)%3===1){?>alpha<?}?> <? if((i+1)%3===0){?>omega<?}?>">
      <a href="<?=data[i].url?>" title="<?=Translator.get('more.product.info')?>">
        <img src="<?=data[i].image?>" alt="">
      </a>
    </div>
    <? if((i+1)%3 === 0 || (i+1) === l){?>
      </div>
    <?}?>
  <? }?>
</script>


{% endblock %}
