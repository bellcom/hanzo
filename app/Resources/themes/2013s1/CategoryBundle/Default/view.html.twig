{% extends layout %}

{% block meta %}
{% if ('headers.'~page_type)|trans({}, 'category') != 'headers.'~page_type %}
{{ meta_tags('og:description,description') }}
<meta property="og:description" content="{{ ('headers.'~page_type)|trans({}, 'category')|raw|strip_tags }}">
<meta name="description" content="{{ ('headers.'~page_type)|trans({}, 'category')|raw|strip_tags }}">
{% endif %}
{% endblock %}

{% block content %}

<form action="{{ url(app.request.attributes.get('_route')) }}" class="js-faceted-form">
  <nav class="menu clearfix main-menu filters-dropdowns">
    <ul class="outer">

      <li class="first">
        <div>{{ 'faceted.dropdown.size'|trans({}, 'category') }}<span class="fa fa-angle-down"></span></div>
        <ul class="js-filter-type-size">
          {% for size in size_mapping %}
          <li class="inactive item {% if loop.first %}first{% elseif loop.last %}last{% endif %}"><input data-name="{{ size }}" type="checkbox" name="size[]" value="{{ size }}" id="size_{{ size|tag_safe }}"/> <label for="size_{{ size|tag_safe }}"> {{ size }}</label></li>
          {% endfor %}
          <li class="clearfix"></li>
          <li><a href="size" class="js-filter-clear-dropdown">{{ 'faceted.clear_all'|trans({}, 'category') }}</a><span class="fa fa-angle-up"></span></li>
        </ul>
      </li>

      <li>
        <div>{{ 'faceted.dropdown.color'|trans({}, 'category') }}<span class="fa fa-angle-down"></span></div>
        <ul class="js-filter-type-color">
          {% for color in color_mapping %}
          <li class="inactive item {% if loop.first %}first{% elseif loop.last %}last{% endif %}"><input data-name="{{ color }}" type="checkbox" name="color[]" value="{{ color|tag_safe({' & ': ' - '}) }}" id="color_{{ color|tag_safe }}"/> <label for="color_{{ color|tag_safe }}"> {{ color }}</label></li>
          {% endfor %}
          <li class="clearfix"></li>
          <li><a href="color" class="js-filter-clear-dropdown">{{ 'faceted.clear_all'|trans({}, 'category') }}</a><span class="fa fa-angle-up"></span></li>
        </ul>
      </li>

      <li class="last">
        <div>{{ 'faceted.dropdown.eco'|trans({}, 'category') }}<span class="fa fa-angle-down"></span></div>
        <ul class="js-filter-type-eco">
          {% for token in token_mapping %}{# Note: value is prefixed with 'token-' as this is the value in the db  #}
          <li class="inactive item {% if loop.first %}first{% elseif loop.last %}last{% endif %}"><input data-name="{{ token.name }}" type="checkbox" name="eco[]" value="token-{{ token.value|tag_safe({' & ': ' - '}) }}" id="token_{{ token.name|tag_safe }}"/> <label for="token_{{ token.name|tag_safe }}"> {{ token.name }}</label></li>
          {% endfor %}
          <li class="clearfix"></li>
          <li><a href="eco" class="js-filter-clear-dropdown">{{ 'faceted.clear_all'|trans({}, 'category') }}</a><span class="fa fa-angle-up"></span></li>
        </ul>
      </li>

    </ul>
  </nav>
</form>

<header class="grid_8 alpha omega">
    <hgroup>
        <!-- {{ 'headers.'~page_type }} -->
        {% if ('headers.'~page_type)|trans({}, 'category') != 'headers.'~page_type %}
          {{ ('headers.'~page_type)|trans({}, 'category')|raw }}
        {% else %}
          <h1>{{ browser_title }}</h1>
        {% endif %}
    </hgroup>
</header>

<div class="grid_8 alpha omega row">
  {{ render(controller('CMSBundle:Menu:menu', {
    'type': 'breadcrumb',
    'thread': 20
  })) }}
</div>

<div class="grid_8 alpha omega row js-filters filters-selected off">
  {{ 'faceted.selected_filters'|trans({}, 'category') }}:

  <span class="last"><a href="all" class="js-filter-clear-dropdown">{{ 'faceted.clear_all'|trans({}, 'category') }}</a></span>
</div>

<div class="grid_8 alpha omega row">
  <div class="grid_2 alpha sub-menu menu">
    <div class="grid_2 alpha sub-menu menu">
        {{ render(controller('CMSBundle:Menu:menu', {
            'type': 'sub',
            'thread' : 20,
            'include_self' : true
        })) }}
    </div>
  </div>
  {% include 'CategoryBundle:Default:listCategoryProducts.html.twig' %}
</div>
{% endblock %}
