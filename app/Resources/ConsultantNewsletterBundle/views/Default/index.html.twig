{% extends layout %}

{% block content %}
<nav class="sub">
  <ul>
    <li>
      <a href="{{ path('events_create') }}">
        {{ 'events.create_event.link'|trans({}, 'events') }}
      </a>
    </li>
  </ul>
</nav>

<h1>{{ 'events.calendar.header.text'|trans({}, 'events') }}</h1>

{% if app.session.hasFlash('notice') %}
<div class="message notice">
  {{ app.session.flash('notice')|trans({}, 'events') }}
</div>
{% endif %}


<p>{{ 'events.calendar.description.text'|trans({}, 'events') }}</p>
<div id="calendar"></div>
<textarea class="tinymce"></textarea>
{% endblock %}

{% block javascript %}
<script src="/fx/scripts/tinymce/jscripts/tiny_mce/jquery.tinymce.js"></script>
<script type="text/javascript">
  $(document).ready(function(){
    $('textarea.tinymce').tinymce({
      // Location of TinyMCE script
      script_url : '/fx/scripts/tinymce/jscripts/tiny_mce/tiny_mce.js',

      // General options
      force_br_newlines : true,
      force_p_newlines : false,
      forced_root_block : '',
      mode : "textareas",
      editor_selector : "mceEditor",
      height : "400px",
      width : "750px",
      elements : "",
      
      // Theme options
      theme : "advanced",
      plugins : "style,table,save,advhr,advimage,advlink,insertdatetime,media,paste",
      theme_advanced_buttons1 : "bold,italic,underline,strikethrough,|,justifyleft,justifycenter,justifyright,justifyfull,|,bullist,numlist,link,unlink,image",
      theme_advanced_buttons2 : "",
      theme_advanced_buttons3 : "",
      theme_advanced_toolbar_location : "top",
      theme_advanced_toolbar_align : "left",
      theme_advanced_path_location : "bottom",
      extended_valid_elements : "a[name|href|target|title|onclick|class|rel|style],img[id|class|src|border=0|alt|title|hspace|vspace|width|height|align|onmouseover|onmouseout|name|rel],hr[class|width|size|noshade],font[face|size|color|style],span[class|align|style]",
      

      relative_urls : false,
      document_base_url : base_url,
      file_browser_callback: "pdlSimpleFileManager",
    });
  });
function pdlSimpleFileManager(field_name, url, type, win) {
 var pdlSimpleFileManagerUrl = base_url + "consultantnewsletter/filemanager";
  switch (type) {
    case "image":
    case "media":
    case "flash":
    case "file":
      break;
    default:
      return false;
  }
  tinyMCE.activeEditor.windowManager.open({
      url: pdlSimpleFileManagerUrl,
      width: 750,
      height: 440,
      inline : "yes",
      close_previous : "no"
  },{
      window : win,
      input : field_name
  });
}
</script>
{% endblock %}