{% extends '::base.html.twig' %}

{% block content %}

  <h1>{{ 'title'|trans({}, 'search') }}</h1>

  {{ fx_image_tag('images/search-top.jpg') }}

  <p>{{ 'description'|trans({}, 'search') }}</p>

  <form action="{{ path(route) }}" method="get" class="search">
    <input name="q" type="text" value="{{ app.request.get('q') }}">
    <input type="submit" value="{{ "button.label"|trans({}, 'search') }}" class="button loading" data-info="loading.search">
  </form>

  {% if result is not empty %}
  <ul class="tabs">
    {% if result.products is not empty %}
      <li><a href="#">{{ 'result.products'|trans({'%count%' : result.products|length}, 'search') }}</a></li>
    {% endif %}

    {% if result.pages is not empty %}
      <li><a href="#">{{ 'result.pages'|trans({'%count%' : result.pages|length}, 'search') }}</a></li>
    {% endif %}
  </ul>

  <div class="panes">
  {% if result.products is not empty %}
    <div class="product-list clearfix">

    {% for product in result.products %}

      <div class="block block-num-{{ loop.index }}{% if loop.index is divisibleby(6) %} last{% endif %}">
        <a href="{{ product.url }}" title="{{ "Click for more information about %name%."|trans({'%name%' : product.title}) }}">
          {{ product_image_tag(product.image, '120x240', { 'alt' : product.title }) }}
          <span class="title">{{ product.title }}</span>
          <span class="prices">
          {% if product.prices.sales is defined %}
            <span class="normal strike">{{ product.prices.normal.price|money }}</span>
            <span class="discount">{{ product.prices.sales.price|money }}</span>
          {% else %}
            <span class="normal">{{ product.prices.normal.price|money }}</span>
          {% endif %}
          </span>
        </a>
      </div>

    {% endfor %}

    </div>
  {% endif %}

  {% if result.pages is not empty %}
    <div>
    {% for page in result.pages %}
      <a href="{{ page.url }}">
        <h4>{{ page.title }}</h4>
        <p>{{ page.summery }}</p>
      </a>
    {% endfor %}
    </div>
  {% endif %}

  </div>

  {% endif %}

{% endblock %}
